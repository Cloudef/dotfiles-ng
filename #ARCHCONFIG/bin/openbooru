#!/bin/bash
# If image has .json file as well
# it will look for danbooru post id from it and open in browser
#
# The .json files are generated by 'danbooru' script
# This script can be executed from terminal, or binded to image viewer (such as sxiv)
#
# needs: jshon

main() {
   [[ -f "$@" ]] || return
   [[ -f "${@%.*}.json" ]] || return
   local ID="$(jshon -F "${@%.*}.json" -e "id" -u)"
   [[ -n "$ID" ]] || return
   "$BROWSER" "http://danbooru.donmai.us/posts/$ID"
}
main $@
