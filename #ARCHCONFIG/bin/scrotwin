#!/bin/sh
# Scrot the active window
# without clicking anything.

main() {
  unset x y w h
  local active="$(xdotool getactivewindow)"
  eval $(xwininfo -id $active |
    sed -n -e "s/^ \+Absolute upper-left X: \+\([0-9]\+\).*/x=\1/p" \
           -e "s/^ \+Absolute upper-left Y: \+\([0-9]\+\).*/y=\1/p" \
           -e "s/^ \+Width: \+\([0-9]\+\).*/w=\1/p" \
           -e "s/^ \+Height: \+\([0-9]\+\).*/h=\1/p" )
   xdotool windowraise $active; sleep 0.1
   scrot -g $((w+4))x$((h+4))+$x+$y $@
   sleep 0.1; xdotool windowactivate $active
}
main "$@"
